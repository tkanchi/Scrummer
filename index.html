<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Scrummer — Launchpad</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>

<body data-page="launchpad">
  <div class="app">

    <aside class="sidebar">
      <div class="brand">
        <div class="brandMark" aria-label="Scrummer">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/>
            <path d="M12 12 L19 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="12" cy="12" r="2" fill="currentColor"/>
          </svg>
        </div>
        <div>
          <div class="brandName">SCRUMMER</div>
          <span class="brandTag">Delivery Intelligence</span>
        </div>
      </div>

      <nav class="nav">
        <a href="index.html" data-page="launchpad">
          <span class="navIcon">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M4 7h16M4 12h10M4 17h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </span>
          Setup
        </a>

        <a href="intelligence.html" data-page="intelligence" id="navInsightsLink">
          <span class="navIcon">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M5 19V10M10 19V5M15 19v-8M20 19v-12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </span>
          Insights
        </a>

        <a href="suggestions.html" data-page="suggestions">
          <span class="navIcon">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M8 12l2.5 2.5L16 9" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="currentColor" stroke-width="1.2"/>
            </svg>
          </span>
          Actions
        </a>

        <a href="workspace.html" data-page="workspace">
          <span class="navIcon">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
          </span>
          AI Ceremony Copilot
        </a>
      </nav>

      <div class="sidebarFooter">
        <button id="themeToggle" class="btn themeToggle" type="button" aria-label="Toggle theme">
          <span class="themeLeft">
            <span class="themeDot" aria-hidden="true"></span>
            <span class="themeLabel">Theme</span>
          </span>
          <span id="themeMode" class="themeMode">—</span>
        </button>
      </div>
    </aside>

    <main class="main">

      <header class="topbar">
        <div class="topbarLeft">

          <!-- ✅ FIXED: Tagline now inside a proper strip container (no rounded corners) -->
          <div class="headerBrand">
            <div class="hbText">
              <div class="hbLine">Know what's happening. Know what to do next.</div>
              <div class="hbSub">AI-powered delivery intelligence for modern Agile teams</div>
            </div>
          </div>

          <div class="pageTitle">Launchpad</div>
          <div class="pageSub">Step 1: enter sprint basics.</div>

          <div class="flowWrap">
            <div class="flowSteps" aria-label="Guided flow">
              <div class="flowStep is-active"><span class="flowDot"></span> Step 1: Setup</div>
              <div class="flowArrow">→</div>
              <div class="flowStep"><span class="flowDot"></span> Step 2: Insights</div>
              <div class="flowArrow">→</div>
              <div class="flowStep"><span class="flowDot"></span> Step 3: Actions</div>
            </div>
          </div>
        </div>

        <div class="btnRow">
          <a class="btn btnPrimary primaryCtaFixed" href="intelligence.html" id="nextInsightsBtn">
            <a class="btn btnPrimary primaryCtaFixed" href="intelligence.html" id="nextInsightsBtn">
                  <span id="nextInsightsText">Next: Insights</span>
               </a>
            <span id="nextInsightsText">Next: Insights</span>
          </a>
        </div>
      </header>

      <section class="content">
        <div class="grid2">

          <div class="card">
            <div class="cardHeader">
              <div>
                <h2 class="heroTitle">Sprint setup</h2>
              </div>
            </div>

            <p class="m0" style="color:var(--text-muted); line-height:1.6;">
              Start by entering sprint basics (team size, sprint days, commitment, completed points).
              Scrummer converts your data into signals: capacity health, focus factor, delivery confidence and sprint risk.
            </p>

            <div class="mt16">
              <div class="cardDesc m0">
                <b>What to do:</b> Fill Sprint Setup → click <b>Save &amp; Continue</b> → get your Insights.
              </div>
            </div>
          </div>

          <div class="card" style="margin-bottom:14px;">
            <div class="cardTitle">Demo Data</div>
            <p class="cardDesc m0">Load sample inputs to test Excellent, Normal, and Risky scenarios.</p>
            <div class="mt12 btnRow">
              <button class="btn" type="button" id="demoExcellent">Excellent</button>
              <button class="btn" type="button" id="demoNormal">Normal</button>
              <button class="btn" type="button" id="demoRisky">Risky</button>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">Sprint Setup</div>
            <p class="cardDesc m0">These fields power Risk Score + Confidence %.</p>

            <div class="mt12" style="display:grid; gap:10px;">
              <label>
                <div class="cardDesc m0">Sprint Days</div>
                <input id="sprintDays" class="btn" style="width:100%;" type="number" placeholder="10">
              </label>

              <label>
                <div class="cardDesc m0">Team Members</div>
                <input id="teamMembers" class="btn" style="width:100%;" type="number" placeholder="7">
              </label>

              <label>
                <div class="cardDesc m0">Planned Leave + Holidays (total person-days)</div>
                <input id="leaveDays" class="btn" style="width:100%;" type="number" placeholder="3">
              </label>

              <label>
                <div class="cardDesc m0">Committed Story Points</div>
                <input id="committedSP" class="btn" style="width:100%;" type="number" placeholder="40">
              </label>

              <div class="card" style="padding:14px;">
                <div class="cardTitle" style="font-size:14px;">Last 3 Sprint Velocities (completed SP)</div>
                <p class="cardDesc m0">Used to compute average velocity + volatility.</p>
                <div class="mt12" style="display:grid; grid-template-columns:repeat(3, 1fr); gap:10px;">
                  <input id="v1" class="btn" type="number" placeholder="Sprint 1">
                  <input id="v2" class="btn" type="number" placeholder="Sprint 2">
                  <input id="v3" class="btn" type="number" placeholder="Sprint 3">
                </div>
              </div>

              <div class="btnRow">
                <button id="saveSetup" class="btn btnPrimary" type="button">Save &amp; Continue</button>
                <button id="resetSetup" class="btn btnSubtle" type="button">Reset</button>
              </div>

              <div id="setupMsg" class="cardDesc m0" style="display:none;"></div>
            </div>
          </div>

        </div>
      </section>

    </main>
  </div>

  <script src="js/metrics.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/shell.js"></script>

  <script>
    (function(){
      const $ = (id) => document.getElementById(id);
      const setup = window.Scrummer?.setup;
      if (!setup) return;

      const fields = ["sprintDays","teamMembers","leaveDays","committedSP","v1","v2","v3"];
      const nextBtn = $("nextInsightsBtn");
      const nextText = $("nextInsightsText");

      function hasSavedSetup(){
        try{ return localStorage.getItem("scrummer.setupSaved") === "1"; }catch(e){ return false; }
      }

      window.__scrummerUpdateNav = updateNextBtn;

      function updateNextBtn(){
        if (!nextBtn || !nextText) return;

        if (hasSavedSetup()){
          nextBtn.classList.remove("btnSubtle");
          nextBtn.classList.add("btnPrimary");
          nextText.textContent = "Next: Insights";
        } else {
          nextBtn.classList.remove("btnPrimary");
          nextBtn.classList.add("btnSubtle");
          nextText.textContent = "Next: Insights (save setup)";
        }
      }

      function prefill(){
        const data = setup.loadSetup();
        fields.forEach(k => { if ($(k) && data[k] !== undefined) $(k).value = data[k]; });
      }

      function showMsg(text){
        const el = $("setupMsg");
        if (!el) return;
        el.style.display = "block";
        el.textContent = text;
        setTimeout(()=>{ el.style.display="none"; }, 2200);
      }

      nextBtn?.addEventListener("click", (e)=>{
        if (!hasSavedSetup()){
          e.preventDefault();
          showMsg("Please click Save & Continue first.");
        }
      });

      $("saveSetup")?.addEventListener("click", () => {
        const data = {};
        fields.forEach(k => data[k] = $(k) ? $(k).value : "");
        setup.saveSetup(data);
        try{ localStorage.setItem("scrummer.setupSaved","1"); }catch(e){}
        updateNextBtn();
        showMsg("Saved. Redirecting to Insights…");
        window.location.href = "intelligence.html";
      });

      $("resetSetup")?.addEventListener("click", () => {
        setup.saveSetup({});
        fields.forEach(k => { if ($(k)) $(k).value = ""; });
        try{ localStorage.removeItem("scrummer.setupSaved"); }catch(e){}
        updateNextBtn();
        showMsg("Reset complete.");
      });

      prefill();
      updateNextBtn();
    })();
  </script>

  <script>
    (function(){
      const $ = (id)=>document.getElementById(id);
      const setupApi = window.Scrummer?.setup;
      if(!setupApi) return;

      const ids = {
        sprintDays: "sprintDays",
        teamMembers: "teamMembers",
        leaveDays: "leaveDays",
        committedSP: "committedSP",
        v1: "v1", v2: "v2", v3: "v3"
      };

      function applyDemo(data){
        Object.keys(ids).forEach(k=>{
          const el = $(ids[k]);
          if(el) el.value = (data[k] ?? "");
        });
        setupApi.saveSetup(data);
        try{ localStorage.setItem("scrummer.setupSaved","1"); }catch(e){}

        const msg = $("setupMsg");
        if(msg){
          msg.style.display="block";
          msg.textContent="Demo loaded. Click Next: Insights.";
          setTimeout(()=>{ msg.style.display="none"; }, 1600);
        }

        if (typeof window.__scrummerUpdateNav === "function") window.__scrummerUpdateNav();
      }

      $("demoExcellent")?.addEventListener("click", ()=>applyDemo({
        sprintDays: 10, teamMembers: 8, leaveDays: 1,
        committedSP: 60, v1: 62, v2: 60, v3: 61
      }));
      $("demoNormal")?.addEventListener("click", ()=>applyDemo({
        sprintDays: 10, teamMembers: 7, leaveDays: 3,
        committedSP: 70, v1: 66, v2: 72, v3: 68
      }));
      $("demoRisky")?.addEventListener("click", ()=>applyDemo({
        sprintDays: 10, teamMembers: 6, leaveDays: 8,
        committedSP: 90, v1: 55, v2: 60, v3: 50
      }));
    })();
  </script>

</body>
</html>
